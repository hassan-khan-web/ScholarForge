{% extends "layout.html" %}

{% block content %}
<div class="flex-1 flex flex-col h-full overflow-hidden bg-[var(--bg-main)]">
    <div class="h-16 border-b border-[var(--border-color)] flex items-center px-6 bg-[var(--bg-panel)] shrink-0">
        <div class="flex items-center gap-4 flex-1 max-w-3xl mx-auto">
            <svg class="w-5 h-5 text-[var(--text-muted)]" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="search-input" autofocus
                class="flex-1 bg-transparent border-none text-[var(--text-main)] text-lg focus:outline-none placeholder:text-[var(--text-muted)]"
                placeholder="Search chats and reports..." oninput="performSearch(this.value)"
                onkeydown="handleSearchKeydown(event)">
            <kbd
                class="text-xs text-[var(--text-muted)] bg-[var(--hover-bg)] px-2 py-1 rounded border border-[var(--border-color)]">ESC
                to go back</kbd>
        </div>
    </div>

    <div class="border-b border-[var(--border-color)] bg-[var(--bg-panel)]">
        <div class="flex max-w-3xl mx-auto px-6">
            <button onclick="switchSearchTab('all')" id="search-tab-all"
                class="search-tab px-4 py-3 text-sm font-medium text-[var(--accent-primary)] border-b-2 border-[var(--accent-primary)] transition-colors">
                All Results
            </button>
            <button onclick="switchSearchTab('reports')" id="search-tab-reports"
                class="search-tab px-4 py-3 text-sm font-medium text-[var(--text-muted)] border-b-2 border-transparent hover:text-[var(--text-main)] transition-colors">
                Reports
            </button>
            <button onclick="switchSearchTab('chats')" id="search-tab-chats"
                class="search-tab px-4 py-3 text-sm font-medium text-[var(--text-muted)] border-b-2 border-transparent hover:text-[var(--text-main)] transition-colors">
                Chats
            </button>
        </div>
    </div>

    <div class="flex-1 overflow-y-auto custom-scrollbar">
        <div id="search-results" class="max-w-3xl mx-auto p-6">
            <div class="text-center text-[var(--text-muted)] py-16">
                <svg class="w-16 h-16 mx-auto mb-4 opacity-30" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="1.5">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <h2 class="text-xl font-semibold text-[var(--text-main)] mb-2">Search ScholarForge</h2>
                <p class="text-sm">Find your reports and chat sessions quickly</p>
                <p class="text-xs mt-2">Press <kbd
                        class="px-1.5 py-0.5 bg-[var(--hover-bg)] rounded border border-[var(--border-color)]">Ctrl+K</kbd>
                    from anywhere to open search</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', path='js/search.js') }}"></script>
{% endblock %}